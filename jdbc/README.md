# 궁금증

***

## 3강: 트랜잭션, DB락

여러 커넥션이 연결된 상태에서, 한 세션(세션1) 에서 발생하는 트랜잭션에서 두개의 튜플에 변화를 주려고할 때,  
하나의 튜플을 수정하고, 다른 하나의 튜플을 수정하려고 했지만,  
다른 커넥션에 연결된 세션(세션2)에서 세션1에서 수정하려던 튜플의 락을 이미 가져간 상태이고,  
세션1에서 이미 수정하려고 락을 가져간 튜플을 수정하려고 하는 상태라면 교착상태가 발생할텐데  
이는 어떻게 해결하는지 궁금하다.

ex)  
member : member_id, money로 구성된 릴레이션

세션1에서 memberA에게서 memberB로 2000원 송금  
세션2에서 memberB에게서 memberA로 2000원 송금

세션1애서 memberA의 락을 가져가고 세션2에서 memberB의 락을 가져가서
서로 다음에 필요한 member의 락을 가져가지 못하는 교착상태.

이럴땐 어떻게 해야하는지, 그냥 먼저 타임아웃된 세션에서 rollback하고  
타임아웃되지 않은 세션의 트랜잭션만 수행되고 commit 되는건가??